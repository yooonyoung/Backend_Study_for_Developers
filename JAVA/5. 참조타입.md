# 5. 참조 타입



## 5.1 참조 타입과 참조 변수



#### 참조 타입

메모리의 번지를 통해 객체를 참조

기본타입은 실제 값을 변수에 저장하지만,

참조타입은 번지를 변수에 저장한다.



<img src="https://user-images.githubusercontent.com/38436013/116662422-b92da480-a9d0-11eb-9a8f-a581ffbc81ce.png" alt="image" style="zoom:80%;" />



### 메모리 타입

<img src="https://user-images.githubusercontent.com/38436013/116662351-a31fe400-a9d0-11eb-9358-c0efdc7a982f.png" alt="image" style="zoom: 67%;" />



#### 메소드 영역 

JVM이 시작할 때 생성되고 모든 스레드가 공유하는 영역

정적 필드(static field), 상수(constant), 메소드 코드, 생성자 코드 등을 저장



#### 힙 영역

객체와 배열 생성되는 영역

참조하는 변수나 필드가 없다면, 의미 없는 객체이므로 Garbage Collector으로 자동 제거



#### JVM 스택 영역

메소드 호출할 때마다 프레임 추가, 메소드 종료되면 프레임 제거

프레임 내부에서는 로컬 변수 스택이 있음, 스택 영역에 변수가 생성되는 시점은 초기화가 될 때, 즉 최초로 변수에 값이 저장될 때임



<img src="https://user-images.githubusercontent.com/38436013/116664902-0cedbd00-a9d4-11eb-9cc4-6b21d9d9ab32.png" alt="image" style="zoom: 67%;" />

 ~~~
int [] scores = {10, 20, 30};
 ~~~

배열 변수인 scores는  `스택영역`에 생성,  하지만 실제 값10,20,30은 `힙영역`에 생성

자바에서는 배열을 객체로 취급



#### 참조변수의 ==, != 연산

참조 타입에서 이 연산은 `동일한 객체를 참조하는지`를 볼때 사용

결국 **==,!= 은 번지 값을 비교**

**동일한 번지 값을 갖고 있다 = 동일한 객체 참조한다**



#### null과 NullPointerException

null = 객체를 참조하지 않는다

null값도 초기값으로 사용 가능, null로 초기화된 참조 변수는 스택 영역에 생성



**NullPointerException 이란?**

참조 변수가 null값을 가지고 있는 상태에서, 있지도 않은 객체의 필드나 메소드를 사용하면 

NullPointerException이 발생한다.

~~~java
int [] a = null;
a[0] = 10; // 에러 발생
~~~



### String 타입

String 변수는 스택에 생성,

문자열은 String 객체로 힙에 생성



~~~java
String name = "aa"; // 방법1
String name1 = "aa"; 

String name2 = new String("aa");  // 방법2
~~~

방법1에서 name, name1은 문자열 리터럴이 동일하다면 같은 String 객체를 공유한다.

but,

방법2는 new 연산자를 이용해 힙 영역에 새로운 객체를 만들 때 사용하는 방법이다.

즉, 같은 문자열을 저장했지만 name1, name2은 서로 다른 String 객체를 참조한다.

<img src="https://user-images.githubusercontent.com/38436013/116666860-71118080-a9d6-11eb-8e3b-2cac2cd7f996.png" alt="image" style="zoom: 67%;" />

##### 번지 말고 문자열 비교하는 법

~~~
boolean result = str1.equals(str2);
~~~

같다면 true, 다르다면 false 반환



~~~
String hobby = "dd";
hobby = null
~~~

null을 대입함으로써 더이상 String 객체를 참조할 수 없는데,

참조를 잃은 String 객체는 가비지컬렉터가 메모리에서 자동 제거한다.



## 5.2 배열



### 배열

무엇 ? 자료구조.

어떤 ? 같은 타입의 데이터를 나열한..

그리고 ? 그 데이터에 인덱스 부여함



### 배열 선언

두가지 형식 가능

~~~java
int [] a;
int arr[];
~~~

배열도 객체다.

배열 객체는 힙에 생성, 배열 변수는 스택에 생성되고 배열 객체를 참조



### 배열 생성

객체 생성하려면 값 목록을 이용하거나 new 연산자를 이용하는 방법



#### 값 목록을 배열 생성

~~~java
타입 [] 변수 = { , , , , ...} //정석


타입 [] 변수;
변수 = { , , , ...}  // 컴파일에러
~~~

배열 변수 선언과 배열 객체 생성은 동시에 이루어져야 한다.



배열 변수를 미리 선언한 후, 값 목록들이 나중에 결정되야 한다면 new 연산자 쓰자

~~~java
String [] n;
n = new String[] {"dd", "ss"}; 

// 메소드의 매개값이 배열일 경우도 마찬가지
int result = add({90, 85, 90}); // 컴파일 에러
int result = add( new int[] {90, 85, 90});
~~~



#### new 연산자로 배열 생성

~~~java
타입 [] 변수 = new 타입[길이];

타입[] 변수 = null;
변수 = new 타입[길이];

타입[] 변수 = new 타입[길이];
~~~



### 배열 길이

~~~
배열변수.length
~~~



186쪽부터다시

